{
    "settings": {
       "analysis": {
          "analyzer": {
             "autocomplete": {
                "tokenizer": "my_tokenizer",
                "filter": [
                   "trim",
                   "lowercase",
                   "asciifolding"
                ]
             },
             "autocomplete_search": {
                "tokenizer": "standard",
                "filter": [
                   "trim",
                   "lowercase",
                   "my_stemmer",
                   "my_stop",
                   "asciifolding"
                ]
             }
          },
          "tokenizer": {
             "my_tokenizer": {
                "type": "edge_ngram",
                "min_gram": 1,
                "max_gram": 20,
                "token_chars": [
                   "letter",
                   "digit"
                ]
             }
          },
          "filter" : {
             "my_stemmer" : {
                "type" : "stemmer",
                "name" : "light_spanish"
             },
             "my_stop": {
                "type":       "stop",
                "stopwords":  "_spanish_"
             }
          }
       }
    },
    "aliases" : {
        "main-mapping-pruebas": {}
    },  
    "mappings":{  
       "_doc":{  
          "properties":{
             "name":{ "type":"text" },
             "surname":{ "type":"text" },
             "slug":{ 
                "type":"keyword"
             },
             "fullname":{ 
                "type":"text",
                "analyzer": "autocomplete",
                "search_analyzer": "autocomplete_search"
             },
             "image_thumb_square":{ "type":"text"},
             "image_search_square":{ "type":"text"},
             "image_square":{ "type":"text"},
             "city":{ "type":"text"},
             "cityslug":{ "type":"text"},
             "specializations": { 
                "properties":{
                   "name":{ 
                      "type":"text",
                      "analyzer": "autocomplete",
                      "search_analyzer": "autocomplete_search",
                      "fields": {
                         "keyword": { 
                            "type": "keyword"
                         }
                      } 
                   },
                   "slug":{ 
                      "type":"keyword"
                   },
                   "subspecializations":{ 
                       "properties": {
                           "_id": { "type": "text" },
                           "name":  { 
                               "type": "text",
                               "analyzer": "autocomplete",
                               "search_analyzer": "autocomplete_search",
                               "fields": {
                                  "keyword": { 
                                     "type": "keyword"
                                  }
                               }
                            },
                           "slug":  { "type": "keyword" },
                           "created":{  
                               "type": "date",
                               "format": "strict_date_optional_time||epoch_millis"
                           }
                       }
                   },
                   "type": { "type": "text"},
                   "created":{  
                       "type": "date",
                       "format": "strict_date_optional_time||epoch_millis"
                   }
               }
             },
             "verified": { "type":"boolean"},
             "stars": { "type": "integer"},
             "py": { "type":"boolean"},
             "has_picture": { "type": "boolean"},
             "treatment": { "type":"text"},
             "member_number": { "type":"text"},
             "about_me": { "type":"text"},
             "treated_cases": { 
                "type":"text",
                "analyzer": "autocomplete",
                "search_analyzer": "autocomplete_search",
                "fields": {
                   "keyword": { 
                      "type":"keyword"
                   }
                } 
             },
             "educations": { "type":"text"},
             "languages": { 
                "type":"keyword"
             },
             "client_types": { "type":"text"},
             "photos": { "type":"text"},
             "videos": { "type":"text"},
             "social_networks": { 
                "properties": {
                      "facebook":  { "type": "text" },
                      "twitter":  { "type": "text" },
                      "linkedin":  { "type": "text" },
                      "instagram":  { "type": "text" }
                   }
             },
             "facilities": {
                "type": "nested", 
                "properties": {
                      "name":  { 
                         "type": "text",
                         "analyzer": "autocomplete",
                         "search_analyzer": "autocomplete_search" 
                      },
                      "slug":  { "type": "text" },
                      "postal_code":  { "type": "integer" },
                      "full_address": { 
                         "type": "text",
                         "fields": {
                            "keyword": { 
                               "type":"keyword"
                            }
                         }   
                      },
                      "address_locality":  { "type": "text" },
                      "address_region":  { "type": "text" },
                      "address_country":  { "type": "text" },
                      "street_address":  { "type": "text" },
                      "street_address_aux":  { "type": "text" },
                      "coordinates": { "type": "geo_point" },
                      "phones":  { "type": "text" },
                      "website":  { "type": "text" },
                      "insurances":  { 
                         "type":"keyword"
                      },
                      "services":  {
                         "properties": {
                            "name": { 
                               "type": "text",
                               "analyzer": "autocomplete",
                               "search_analyzer": "autocomplete_search",
                               "fields": {
                                  "keyword": { 
                                     "type":"keyword"
                                  }
                               }  
                            },
                            "price":  { "type": "text" }
                         }
                      },
                      "payment_methods":  { 
                         "type":"keyword"
                      }
                   }
             },
             "created":{  
                "type": "date",
                "format": "strict_date_optional_time||epoch_millis"
             }
          }
       }
    }
 }
 